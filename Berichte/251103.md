# Host Discovery und Port probing und scanning

## Host Discovery

### Aufgabenstellung

Übung (host discovery)
nmap ist ein Tool zum network scanning. In einer ersten Phase (host discovery, ping scan oder ping sweep) ermittelt nmap alle aktiven Hosts.

Aufgaben:

Recherchiere zur grundlegenden Anwendung von nmap für einen sogenannten ping scan (host discovery).
Ermittle alle aktiven Hosts im Subnetz des Labor-Netzwerks mit nmap.
Hinweise:

nmap benötigt als Argument den IP Adressbereich des Subnet in Präfix Notation (z.B.: 192.168.178.0/24)
Mit der Option -sn führt nmap nur den ping scan durch (ansonsten wird automtisch auch die nächste, länger dauernde, Phase des scans ausgeführt)

### Lösung

####  Nmap Ping Scan Anwendung

Der Nmap Ping wird verwendet um herauszufinden wer in einem Netz erreichbar/online ist

Hier ein Paar wichtige Optionen:

- sn → Nur Host-Discovery (kein Portscan)

- Pn → Skip Ping (alle Hosts „up“)

- PR → ARP-Ping (lokales Netz)



#### NMAP Scan Netz 192.168.1.0/24

![Nmap Scan](../Bilder/NMAP%20Scan.png)

## Port probing und scanning

### Aufgabenstellung

Übung (port probing)
Beim port probing möchte man herausfinden ob auf einem gewissen port ein Dienst läuft, welcher Dienst dies ist und (wenn möglich) mehr Details wie z.B. Versionsnummern. Diese Information dient als Basis für weitere Angriffe.

telnet, nc (netcat) und curl sind einfache Tools die zum port probing verwendet werden können. Teilweise ist es auch möglich die kontaktierten Dienste dazu zu veranlassen mehr Informationen über sich preiszugeben (banner grabbing).

Verwende telnet um festzustellen ob ein ssh Server auf Metasploitable läuft
Finde Bezeichnung und die Versionsnummer des Web Servers auf Metasploitable heraus. Auf 3 Arten:
Verwende telnet
Verwende nc (netcat)
Hinweis: der notwendige http request header kann am besten mit Hilfe eines Shell here-documents beschrieben werden.
Verwende curl
Erstelle ein port probing cheat sheet für alle 3 Tools

### Lösung

#### Telnetprüfung für SSH Server

![Telnetprüfung](../Bilder/Telnetprüfung%20SSH%20Server.png)


#### Bezeichnung Versionsnummer 3 Arten

##### Telnet

```
$ telnet 192.168.1.51 80
```
Dann im fenster die Befehle:
```
GET / /HTTP/1.1
Host: 192.168.1.52
```

![Telnet Webserver](../Bilder/Telnetprüfung%20Webserver.png)


##### Netcat

```
$ NC 192.168.1.51 80 << EOF
```
Dann im fenster die Befehle:
```
GET / /HTTP/1.1
Host: 192.168.1.52

EOF
```

![Netcat Prüfung](../Bilder/NCPrüfung%20Webserver.png)

##### Curl

```
$ curl -I http://192.168.1.52/
```

Danach bekommt man direkt die Antwort:

![Curlprüfung Webserver](../Bilder/Curlprüfung%20Webserver.png)

#### Port Probing Cheatsheat

##### Telnet
```
telnet <IP> <PORT>      # TCP prüfen
```
HTTP-Banner manuell:
```
GET / HTTP/1.0
Host: <IP>
```

##### Netcat
```
nc -vz <IP> <PORT>      # TCP-Port prüfen
nc -vzu <IP> <PORT>     # UDP-Port prüfen
```
HTTP-Banner:
```
GET / HTTP/1.0
Host: <IP>
```

##### Curl
```
curl -I http://<IP>/                   
```

## Netcat Port Scan

### Aufgabenstellung

Ermittle mit Hilfe von netcat welche Ports zwischen 1 und 30 in der Metasploitable VM geöffnet sind – Hinweis: dies geht in einer einzigen Kommandozeile. Recherchiere welche Dienste sich dort befinden.

Randnotitz: netcat wird auch gerne als das swiss army knife of network tools bezeichnet.

### Lösung

#### Einzeiler Netcat für Ports 1-30

```
nc -vz 192.168.1.52 1-30
```

Erklärung:

nc → Netcat

-v → verbose, zeigt welche Ports offen sind

-z → Zero-I/O Mode (nur prüfen, keine Daten senden)

192.168.1.52 → IP deiner Metasploitable VM

1-30 → Ports 1 bis 30 scannen

##### Ausprobieren

![Einzeiler Netcat](../Bilder/Einzeiler%20Netcat.png)

#### Ports von 1-30

Port	Dienst / Protokoll	Beschreibung

21	FTP	File Transfer Protocol

22	SSH	Secure Shell

23	Telnet	Unverschlüsselte Terminalverbindung

25	SMTP	Mail Transfer (Simple Mail Transfer Protocol)





